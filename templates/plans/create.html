{% extends "base.html" %}
{% block content %}

<style>

    .create-wrap {
        padding: 10px 12px 20px;
        display: grid;
        grid-template-columns: minmax(300px, 420px) minmax(260px, 1fr);
        gap: 20px;
    }

    @media(max-width:900px){
        .create-wrap { grid-template-columns: 1fr; }
    }

    .create-header {
        margin-bottom: 20px;
    }

    .create-title {
        font-size: 26px;
        font-weight: 800;
    }

    .create-sub {
        font-size: 12px;
        opacity: .7;
    }

    /* FORM CARD */
    .form-box {
        padding: 20px 18px;
        border-radius: 18px;
        background: var(--card-bg);
        border: 1px solid rgba(148,163,184,0.25);
        box-shadow: 0 14px 38px rgba(15,23,42,0.8);
    }

    .form-label { font-size: 12px; margin-bottom: 3px; }

    .form-control,
    .form-select {
        background: rgba(15,23,42,0.95);
        border: 1px solid rgba(75,85,99,0.9);
        border-radius: 12px;
        color: var(--text);
        font-size: 13px;
    }

    .form-control:focus,
    .form-select:focus {
        border-color: #38bdf8;
        box-shadow: 0 0 0 1px rgba(56,189,248,0.4);
        color: var(--text);
    }

    /* PREVIEW */
    .preview-box {
        padding: 20px;
        border-radius: 18px;
        background: radial-gradient(circle at top left, rgba(56,189,248,0.25), transparent 60%),
                    radial-gradient(circle at bottom right, rgba(129,140,248,0.25), transparent 60%),
                    var(--card-bg);
        border: 1px solid rgba(148,163,184,0.35);
        box-shadow: 0 14px 40px rgba(15,23,42,0.9);
        color: var(--text);
    }

    .preview-header {
        font-size: 18px;
        font-weight: 700;
    }

    .preview-line {
        margin-top: 10px;
        font-size: 14px;
    }

    .btn-create {
        margin-top: 12px;
        border-radius: 999px;
        padding: 10px 18px;
        border: none;
        font-weight: 700;
        color: white;
        background: linear-gradient(135deg, #4f46e5, #22c55e);
        box-shadow: 0 12px 28px rgba(34,197,94,0.6);
    }

    .btn-create:hover {
        transform: translateY(-1px);
    }

</style>

<div class="create-header">
    <div class="create-title">Create New Plan</div>
    <div class="create-sub">Flexible durations • smart previews • premium design</div>
</div>

<div class="create-wrap">

    <!-- LEFT FORM -->
    <div class="form-box">

        <form method="POST">
            {% csrf_token %}

            <div class="mb-3">
                <label class="form-label">Plan Name</label>
                <input class="form-control" name="name" id="pname" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Price (₹)</label>
                <input class="form-control" type="number" name="price" id="pprice" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Duration Type</label>
                <select name="duration_type" id="ptype" class="form-select" required>
                    <option value="days">Days</option>
                    <option value="weeks">Weeks</option>
                    <option value="months" selected>Months</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Duration Value</label>
                <input class="form-control" type="number" name="duration_value" id="pvalue" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Description (optional)</label>
                <textarea name="description" id="pdesc" class="form-control" rows="3"></textarea>
            </div>

            <button class="btn-create">Save Plan</button>

        </form>
    </div>

    <!-- RIGHT PREVIEW -->
    <div class="preview-box">
        <div class="preview-header" id="prv_name">Plan Preview</div>
        <div class="preview-line" id="prv_price">₹ 0</div>
        <div class="preview-line" id="prv_dur">Duration: —</div>
        <div class="preview-line" id="prv_desc">Description: —</div>
    </div>

</div>

<script>
    function updatePreview() {
        document.getElementById("prv_name").textContent =
            document.getElementById("pname").value || "New Plan";

        document.getElementById("prv_price").textContent =
            "₹ " + (document.getElementById("pprice").value || "0");

        let type = document.getElementById("ptype").value;
        let v = document.getElementById("pvalue").value;

        document.getElementById("prv_dur").textContent =
            `Duration: ${v || "—"} ${type}`;

        document.getElementById("prv_desc").textContent =
            "Description: " + (document.getElementById("pdesc").value || "—");
    }

    ["pname","pprice","ptype","pvalue","pdesc"].forEach(id => {
        document.getElementById(id).addEventListener("input", updatePreview);
    });

    updatePreview();
</script>

{% endblock %}
